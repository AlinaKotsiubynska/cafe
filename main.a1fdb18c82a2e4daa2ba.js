(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{B01y:function(e,t,n){var r=n("mp5j");e.exports=(r.default||r).template({compiler:[8,">= 4.3.0"],main:function(e,t,n,r,i){var a,l=null!=t?t:e.nullContext||{},o=e.hooks.helperMissing,s=e.escapeExpression,u=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"\n    <li data-id="+s("function"==typeof(a=null!=(a=u(n,"tableNum")||(null!=t?u(t,"tableNum"):t))?a:o)?a.call(l,{name:"tableNum",hash:{},data:i,loc:{start:{line:2,column:16},end:{line:2,column:28}}}):a)+">\n        <span>Стол №"+s("function"==typeof(a=null!=(a=u(n,"tableNum")||(null!=t?u(t,"tableNum"):t))?a:o)?a.call(l,{name:"tableNum",hash:{},data:i,loc:{start:{line:3,column:20},end:{line:3,column:32}}}):a)+"</span>\n        <span>"+s("function"==typeof(a=null!=(a=u(n,"isPrep")||(null!=t?u(t,"isPrep"):t))?a:o)?a.call(l,{name:"isPrep",hash:{},data:i,loc:{start:{line:4,column:14},end:{line:4,column:24}}}):a)+"</span>\n    </li>\n"},useData:!0})},L1EO:function(e,t,n){},QfWi:function(e,t,n){"use strict";n.r(t);n("L1EO"),n("RtS0"),n("fp7Y"),n("Muwe"),n("aZFp"),n("3dw1"),n("hi3g"),n("lYjL"),n("IlJM"),n("lmye"),n("D/wG"),n("zSSO");var r=[{name:"Ann",isPresent:!0,tables:[],tips:0},{name:"Nick",isPresent:!1,tables:[],tips:0},{name:"Carrol",isPresent:!0,tables:[],tips:0},{name:"Jack",isPresent:!1,tables:[],tips:0},{name:"Berry",isPresent:!1,tables:[],tips:0},{name:"Jim",isPresent:!0,tables:[],tips:0}],i=[{table:1,service:""},{table:2,service:""},{table:3,service:""},{table:4,service:""},{table:5,service:""},{table:6,service:""},{table:7,service:""},{table:8,service:""}],a=[{id:"capuchino",name:"Капучино",price:45},{id:"late",name:"Лате",price:40},{id:"napoleon",name:"Торт Наполеон",price:75},{id:"water-0.5",name:"Вода без газа 0,5",price:20},{id:"zavarnoe",name:"Пирожное Заварное",price:38},{id:"espresso",name:"Еспрессо",price:30},{id:"marcepan",name:"Марцепан",price:45},{id:"fresh-orang-0.3",name:"Фреш Апельсиновый 0,3",price:45}],l=new(function(){function e(e){var t=e.workers,n=e.tables,r=e.menu;this.workers=t,this.tables=n,this.menu=r}var t=e.prototype;return t.addNewOfficiant=function(e){var t={name:e,isPresent:!1,tables:[],tips:0};this.workers=[].concat(this.workers,[t])},t.getPresentWorkers=function(){this.presentWorkers=this.workers.filter((function(e){return e.isPresent}))},t.setupTables=function(){this.getPresentWorkers();var e=this.presentWorkers,t=e.length,n=0;this.tables.forEach((function(r){n>=t&&(n=0),r.service=e[n].name,e[n].tables.push({id:r.table}),n+=1}))},t.findTable=function(e){return this.tables.find((function(t){return t.table===e}))},t.addOrder=function(e,t,n){var r,i=this.findTable(e);i.order?i.order[t]?i.order[t]+=n:i.order[t]=n:i.order=((r={})[t]=n,r)},t.removeDish=function(e,t,n){var r=this.findTable(e);if(r.order)return r.order[t]-=n,r.order[t]<1?delete r.order[t]:void 0},t.removeOrder=function(e){var t=this.findTable(e);if(t.order)return delete t.order},t.setOrder=function(e){var t=this,n=this.findTable(e),r=n.order;r&&(n.preparing=Object.entries(r).map((function(e){var n=e[0],r=e[1];return t.menu.find((function(e){return e.id===n})).name+" - "+r})),n.isPrep=!1)},e}())({workers:r,menu:a,tables:i}),o=n("QrzF"),s=n.n(o),u=n("B01y"),c=n.n(u);function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var p=function(){function e(){var t=this;d(this,"renderMenuList",(function(n){var r=e.refs.body,i=s()({items:l.menu,table:n});r.insertAdjacentHTML("afterbegin",i);var a=document.getElementById("table-"+n);a.querySelector("ul").addEventListener("click",t.handlerAddDish),a.addEventListener("submit",t.handlerSubmitOrder)})),d(this,"handlerAddDish",(function(e){if("BUTTON"===e.target.nodeName){var n=e.target.parentNode,r=n.querySelector("input"),i=n.id,a=Number(r.value);l.addOrder(t.tableNum,i,a),console.log(l.tables[t.tableNum-1].order)}})),d(this,"handlerSubmitOrder",(function(e){e.preventDefault();var n=e.currentTarget.id.split("-").pop(),r=l.findTable(Number(n));l.setOrder(Number(n)),t.renderPreparedList({tableNum:n,isPrep:r.isPrep}),e.currentTarget.remove()})),d(this,"renderPreparedList",(function(t){var n=t.tableNum,r=t.isPrep,i=c()({tableNum:n,isPrep:r?"Уже готово":"Готовится"}),a=document.getElementById("prep-list");a||((a=e.refs.prepList).setAttribute("id","prep-list"),a.setAttribute("style","position: absolute; top: 0; left: 0"),e.refs.body.insertAdjacentElement("afterbegin",a)),!a.querySelector('[data-id="'+n+'"]')&&a.insertAdjacentHTML("afterbegin",i)})),this.tableNum=1}return e.prototype.renderOpenMenuBtn=function(){var t=this,n=document.createElement("ul");l.tables.forEach((function(e){var t='<li><button type="button">'+e.table+"</button></li>";n.insertAdjacentHTML("beforeend",t)})),e.refs.body.insertAdjacentElement("afterbegin",n),n.addEventListener("click",(function(e){"BUTTON"===e.target.nodeName&&(t.tableNum=Number(e.target.textContent),t.renderMenuList(e.target.textContent))}))},e}();d(p,"refs",{body:document.querySelector("body"),form:document.createElement("form"),prepList:document.createElement("ul")}),(new p).renderOpenMenuBtn()},QrzF:function(e,t,n){var r=n("mp5j");e.exports=(r.default||r).template({1:function(e,t,n,r,i){var a=e.lambda,l=e.escapeExpression,o=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return"        <li id="+l(a(null!=t?o(t,"id"):t,t))+">\n            <p>"+l(a(null!=t?o(t,"name"):t,t))+'</p>\n            <input type="text" value="1" />\n            <button type="button">Add</button>\n        </li>\n'},compiler:[8,">= 4.3.0"],main:function(e,t,n,r,i){var a,l,o=null!=t?t:e.nullContext||{},s=e.lookupProperty||function(e,t){if(Object.prototype.hasOwnProperty.call(e,t))return e[t]};return'<form id="table-'+e.escapeExpression("function"==typeof(l=null!=(l=s(n,"table")||(null!=t?s(t,"table"):t))?l:e.hooks.helperMissing)?l.call(o,{name:"table",hash:{},data:i,loc:{start:{line:1,column:16},end:{line:1,column:25}}}):l)+'">\n    <ul>\n\n'+(null!=(a=s(n,"each").call(o,null!=t?s(t,"items"):t,{name:"each",hash:{},fn:e.program(1,i,0),inverse:e.noop,data:i,loc:{start:{line:4,column:8},end:{line:10,column:18}}}))?a:"")+'\n    </ul>\n    <button type="submit"> Отправить заказ </button>\n</form>'},useData:!0})}},[["QfWi",1,2]]]);
//# sourceMappingURL=main.a1fdb18c82a2e4daa2ba.js.map